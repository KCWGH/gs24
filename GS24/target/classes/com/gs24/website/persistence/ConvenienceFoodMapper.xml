<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gs24.website.persistence.ConvenienceFoodMapper">
	<resultMap type="com.gs24.website.domain.ConvenienceFoodVO" id="ConvenienceFoodResultMap">
		<id property="convenienceFoodId" column="CONVENIENCE_FOOD_ID"/>
		<result property="convenienceId" column="CONVENIENCE_ID"/>
		<result property="foodId" column="FOOD_ID"/>
		<result property="foodType" column="FOOD_TYPE"/>
		<result property="foodName" column="FOOD_NAME"/>
		<result property="foodPrice" column="FOOD_PRICE"/>
		<result property="foodStock" column="FOOD_STOCK"/>
		<result property="foodProtein" column="FOOD_PROTEIN"/>
		<result property="foodFat" column="FOOD_FAT"/>
		<result property="foodCarb" column="FOOD_CARB"/>
		<result property="foodAvgRating" column="FOOD_AVG_RATING"/>
		<result property="foodReviewCnt" column="FOOD_REVIEW_CNT"/>
		<result property="imgPath" column="IMG_FOOD_PATH"/>
	</resultMap>
	
	<insert id="insertConvenienceFood">
		INSERT INTO CONVENIENCE_FOOD (CONVENIENCE_FOOD_ID,CONVENIENCE_ID,FOOD_ID,FOOD_STOCK)
		VALUES(CONVENIENCE_FOOD_SEQ.NEXTVAL ,#{convenienceId},#{foodId},#{foodStock})
	</insert>
	
	<select id="selectAllConvenienceFood" resultMap="ConvenienceFoodResultMap">
		SELECT DISTINCT	CONVENIENCE_FOOD.CONVENIENCE_FOOD_ID,
				CONVENIENCE_FOOD.CONVENIENCE_ID,
				FOOD_LIST.FOOD_ID,
				FOOD_LIST.FOOD_TYPE,
				FOOD_LIST.FOOD_NAME,
				FOOD_LIST.FOOD_PRICE,
				CONVENIENCE_FOOD.FOOD_STOCK,
				CONVENIENCE_FOOD.FOOD_AVG_RATING,
				CONVENIENCE_FOOD.FOOD_REVIEW_CNT,
				IMG_FOOD.IMG_FOOD_PATH
				FROM CONVENIENCE_FOOD
		INNER JOIN FOOD_LIST ON FOOD_LIST.FOOD_ID = CONVENIENCE_FOOD.FOOD_ID
		INNER JOIN IMG_FOOD ON IMG_FOOD.FOOD_ID = FOOD_LIST.FOOD_ID
	</select>
	
	<select id="selectConvenienceFoodByConvenienceId" resultMap="ConvenienceFoodResultMap">
	SELECT DISTINCT
		CONVENIENCE_FOOD.CONVENIENCE_FOOD_ID,
		CONVENIENCE_FOOD.CONVENIENCE_ID,
		FOOD_LIST.FOOD_ID,
		FOOD_LIST.FOOD_TYPE,
		FOOD_LIST.FOOD_NAME,
		FOOD_LIST.FOOD_PRICE,
		CONVENIENCE_FOOD.FOOD_STOCK,
		CONVENIENCE_FOOD.FOOD_AVG_RATING,
		CONVENIENCE_FOOD.FOOD_REVIEW_CNT,
		IMG_FOOD.IMG_FOOD_PATH
		FROM CONVENIENCE_FOOD
		INNER JOIN FOOD_LIST ON FOOD_LIST.FOOD_ID = CONVENIENCE_FOOD.FOOD_ID
		INNER JOIN IMG_FOOD ON IMG_FOOD.FOOD_ID = FOOD_LIST.FOOD_ID
		WHERE CONVENIENCE_ID = #{convenienceId}
	</select>
	
	<select id="selectDetailConvenienceFoodByFoodId" resultMap="ConvenienceFoodResultMap">
		SELECT DISTINCT
		CONVENIENCE_FOOD.CONVENIENCE_FOOD_ID,
		CONVENIENCE_FOOD.CONVENIENCE_ID,
		FOOD_LIST.FOOD_ID,
		FOOD_LIST.FOOD_TYPE,
		FOOD_LIST.FOOD_NAME,
		FOOD_LIST.FOOD_PRICE,
		FOOD_LIST.FOOD_PROTEIN,
		FOOD_LIST.FOOD_FAT,
		FOOD_LIST.FOOD_CARB,
		CONVENIENCE_FOOD.FOOD_STOCK,
		CONVENIENCE_FOOD.FOOD_AVG_RATING,
		CONVENIENCE_FOOD.FOOD_REVIEW_CNT,
		IMG_FOOD.IMG_FOOD_PATH
		FROM CONVENIENCE_FOOD
		INNER JOIN FOOD_LIST ON FOOD_LIST.FOOD_ID = CONVENIENCE_FOOD.FOOD_ID
		INNER JOIN IMG_FOOD ON IMG_FOOD.FOOD_ID = FOOD_LIST.FOOD_ID
		WHERE CONVENIENCE_FOOD.FOOD_ID = #{foodId}
	</select>
</mapper>